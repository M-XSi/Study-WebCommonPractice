<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>修改图书</title>
</head>
<body>
<form id="frmbook" method="post">
    <input type="hidden" id="booId" name="bookName">
    <table border="0" align="center" cellpadding="5" cellspacing="0" width="500px">
        <tr>
            <td>修改图书</td>
        </tr>
        <tr>
            <td>
                <table id="mytable" width="100%" border="1"cellspacing="0" cellpadding="5">
                    <tr>
                        <td>名称</td>
                        <td>
                            <input type="text" id="bookName" name="bookName">
                        </td>
                    </tr>
                    <tr>
                        <td>价格</td>
                        <td>
                            <input type="text" id="bookPrice" name="bookPrice">
                        </td>
                    </tr>
                    <tr>
                        <td>出版社</td>
                        <td>
                            <input type="text" id="publisher" name="publisher">
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <button type="button" onclick="save()"> 保存</button>&nbsp;
                <button type="button" onclick="cancel()"> 取消</button>&nbsp;
            </td>
        </tr>
    </table>
</form>

<script>

    let booklist=JSON.parse(sessionStorage.getItem('booklist'));
    let selectedIndex=sessionStorage.getItem('selectedIndex');
    let book = booklist[selectedIndex];
    // 数据回填
    document.getElementById('bookName').value=book.bookName;
    document.getElementById('bookPrice').value=book.bookprice;
    document.getElementById('publisher').value=book.publisher;
    document.getElementById('bookId').value=book.bookId;



    function save(){
        let book={
            bookId:parseInt((Math.random()*1000).toString()),
            bookName: document.getElementById('bookName').value,
            bookprice: document.getElementById('bookPrice').value,
            publisher: document.getElementById('publisher').value
        }

        let booklist=JSON.parse(sessionStorage.getItem('booklist'));
        booklist.splice(selectedIndex,1,book);

        sessionStorage.setItem('booklist',JSON.parse('booklist'))

        location.href='booklist.html'

    }

</script>


</body>
</html>